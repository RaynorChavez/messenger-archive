# =============================================================================
# Messenger Archive - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
POSTGRES_USER=archive
POSTGRES_PASSWORD=CHANGE_ME_generate_a_strong_password
POSTGRES_DB=messenger_archive

# DATABASE_URL goes through PgBouncer (connection pooler) on port 6432
# This is used by api and archive-service for efficient connection management
DATABASE_URL=postgresql://archive:CHANGE_ME_generate_a_strong_password@pgbouncer:6432/messenger_archive

# Direct connection (bypasses PgBouncer) - use for migrations or debugging
# DATABASE_URL_DIRECT=postgresql://archive:CHANGE_ME_generate_a_strong_password@postgres:5432/messenger_archive

# -----------------------------------------------------------------------------
# Archive Auth (Scoped Access)
# -----------------------------------------------------------------------------
# Three scopes: admin (both rooms), general (room 1 only), immersion (room 2 only)
# Generate hashes with: python -c "import bcrypt; print(bcrypt.hashpw(b'your-password', bcrypt.gensalt()).decode())"

# Admin scope - full access to both rooms + can trigger analysis
ADMIN_PASSWORD_HASH=$2b$12$CHANGE_ME

# General scope - access to Room 1 (General Chat) only
GENERAL_PASSWORD_HASH=$2b$12$CHANGE_ME

# Immersion scope - access to Room 2 (Immersion) only
IMMERSION_PASSWORD_HASH=$2b$12$CHANGE_ME

# Legacy fallback (maps to admin scope) - keep for backward compatibility
ARCHIVE_PASSWORD_HASH=$2b$12$CHANGE_ME

# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_SECRET=CHANGE_ME_generate_a_64_char_hex_string

# -----------------------------------------------------------------------------
# AI Services
# -----------------------------------------------------------------------------
GEMINI_API_KEY=your-gemini-api-key

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000

# For browser to reach API
# Local dev: http://localhost:8000
# Production: https://your-subdomain.duckdns.org
NEXT_PUBLIC_API_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Archive Service
# -----------------------------------------------------------------------------
# Comma-separated room names to archive (leave empty for all rooms)
ARCHIVE_ROOM_FILTER=

# -----------------------------------------------------------------------------
# Production Only
# -----------------------------------------------------------------------------
# Your DuckDNS domain (used by Caddy for HTTPS)
# DOMAIN=your-subdomain.duckdns.org
